将指定流条目追加到指定键的流中。
如果键不存在，运行此命令的副作用是创建一个带有流值的键。可以使用“NOMKSTREAM”选项禁用流键的创建。

一个条目由一组字段-值对组成。
字段-值对按用户提供的顺序存储。
读取流的命令，例如`XRANGE`或`XREAD`，保证以与`XADD`添加时相同的顺序返回字段和值。

`XADD` 是*唯一的 Redis 命令*，可以向流中添加数据，但是还有其他命令，如 `XDEL` 和 `XTRIM`，可以从流中删除数据。

## 在参数中指定流ID

流条目ID用于标识流中的特定条目。

如果指定的ID参数为`*`字符（星号ASCII字符），`XADD`命令将自动生成一个唯一的ID。然而，在非常罕见的情况下，也可以指定一个格式正确的ID，以便新条目准确地添加到指定的ID位置。

IDs由两个数字组成，用连字符“-”分隔。

    1526919030474-55

两个数都是64位的数字。自动生成ID时，第一部分是Redis实例生成ID的Unix时间（毫秒）。
第二部分只是一个序列号，用于区分在同一毫秒内生成的ID。

您还可以指定一个不完整的ID，只包含毫秒部分，该部分会被解释为序列部分的零值。
如果只想自动生成序列部分，请指定毫秒部分，后跟“-”分隔符和“*”字符：

```
> XADD mystream 1526919030474-55 message "Hello,"
"1526919030474-55"
> XADD mystream 1526919030474-* message " World!"
"1526919030474-56"
```

IDs保证始终递增：如果比较刚插入的条目的ID，它将大于任何过去的ID，因此流内的条目是完全有序的。为了保证这个属性，如果流中的当前顶部ID的时间大于实例的当前本地时间，则将使用顶部条目的时间，并增加ID的序列部分。这可能发生在本地时钟向后跳动时，或者在故障转移后新的主节点具有不同的绝对时间时。

当用户在`XADD`命令中指定了一个显式的ID时，最小有效的ID是`0-1`，用户必须指定一个大于流中任何其他ID的ID，否则命令将失败并返回错误。通常，只有在您有另一个系统生成唯一ID（例如SQL表）并且您真的希望Redis流的ID与此其他系统的ID匹配时，才会使用特定ID。

## 有限流数据流

`XADD`命令结合了`XTRIM`命令相同的语义-请参考其文档页面以获取更多信息。
这允许通过一次调用`XADD`添加新条目并保持流的大小，并有效地用任意阈值限制流。
尽管可以进行精确的修剪并且是默认的，但由于流的内部表示方式，使用`XADD`添加一个条目并进行修剪，使用**几乎精确**修剪（`~`参数）更加高效。

例如，在以下形式中调用`XADD`：

    XADD mystream MAXLEN ~ 1000 * ... entry fields here ...
 
将添加一个新条目，但也会淘汰旧条目，以确保流中只包含1000个条目，或者最多再多一些。

## 关于流的额外信息

关于Redis streams的更多信息，请查看我们的[Redis Streams文档介绍](/topics/streams-intro)。

@examples

```cli
XADD mystream * name Sara surname OConnor
XADD mystream * field1 value1 field2 value2 field3 value3
XLEN mystream
XRANGE mystream - +
```
