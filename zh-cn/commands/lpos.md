该命令返回 Redis 列表中匹配元素的索引。
默认情况下，当没有提供选项时，它会从头到尾扫描列表，寻找第一个匹配的 "element"。如果找到该元素，则返回其索引（以零为起始的位置）。否则，如果没有找到匹配项，则返回 `nil`。

```
> RPUSH mylist a b c 1 2 3 c c
> LPOS mylist c
2
```

可选的参数和选项可以修改命令的行为。
`RANK`选项指定返回的第一个元素的"等级"，以防有多个匹配项。等级为1表示返回第一个匹配项，2表示返回第二个匹配项，以此类推。

例如，在上面的示例中，元素“c”出现多次，如果我想要第二个匹配的索引，我会写：

```
> LPOS mylist c RANK 2
6
```

这意味着第二次出现 "c" 的位置是在第6位。
在 `LPOS` 的 `RANK` 参数中设置为负数将反转搜索方向，从尾部向头部开始搜索。

所以，我们想说，给我从列表尾部开始的第一个元素：

```
> LPOS mylist c RANK -1
7
```

请注意，索引仍然按照“自然”方式报告，即从列表头部开始的第一个元素的索引为0，下一个元素的索引为1，依此类推。这基本上意味着返回的索引是稳定的，无论排名是正数还是负数。

有时我们想要返回不仅是第N个匹配元素，而且是前N个匹配元素的位置。这可以通过使用`COUNT`选项来实现。

```
> LPOS mylist c COUNT 2
[2,6]
```

我们可以结合`COUNT`和`RANK`，这样`COUNT`将尝试返回指定数量的匹配项，但从由`RANK`选项指定的第N个匹配项开始。

```
> LPOS mylist c RANK -1 COUNT 2
[7,6]
```

使用`COUNT`时，可以将匹配项的数目指定为0，以告诉命令我们希望将找到的所有匹配项作为索引数组返回。这比给定一个非常大的`COUNT`选项更好，因为它更通用。

```
> LPOS mylist c COUNT 0
[2,6,7]
```

当使用`COUNT`并且没有匹配项时，返回一个空数组。然而当不使用`COUNT`并且没有匹配项时，命令返回`nil`。

最后，`MAXLEN`选项告诉命令仅与给定数量的列表项进行比较。例如，指定`MAXLEN 1000`将确保命令仅执行1000次比较，有效地在列表的子集上运行算法（根据使用正向还是负向排名的情况，可能是第一部分或最后部分）。这在限制命令的最大复杂性时很有用。当我们期望匹配结果在很早的阶段找到，但希望确保即使这不是真实情况，命令运行时间也不会太长时，这也很有用。

使用`MAXLEN`时，可以将最大比较数指定为0，作为告诉命令我们希望无限比较的方法。这比给出非常大的`MAXLEN`选项更通用。

@examples

```cli
RPUSH mylist a b c d 1 2 3 4 3 3 3
LPOS mylist 3
LPOS mylist 3 COUNT 0 RANK 2
```
