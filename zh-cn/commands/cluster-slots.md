`CLUSTER SLOTS` 返回关于哪个集群槽位映射到哪个 Redis 实例的详细信息。
该命令适用于 Redis 集群客户端库的实现，以便在接收到重定向时检索（或更新）将集群槽位哈希与实际节点网络信息关联的映射。当接收到命令时，可以将其发送到与命令中指定的键最有可能对应的实例。

每个节点的网络信息是一个包含以下元素的数组：

* 首选端点（可以是IP地址、主机名或NULL）
* 端口号
* 节点ID
* 附加网络元数据的映射

首选端点和端口一起定义了客户端用于发送给定插槽的请求的位置。
端点为 NULL 表示节点具有未知的端点，客户端应该使用与发送 `CLUSTER SLOTS` 命令相同的端点连接，但使用命令返回的端口。
当 Redis 节点位于 Redis 不知道端点的负载均衡器后面时，这种未知的端点配置非常有用。
哪个端点设置为首选端点由配置 `cluster-preferred-endpoint-type` 决定。
空字符串 `""` 是端点字段的另一个异常值，还有 ip 字段，如果节点不知道自己的 IP 地址，则返回该值。
这可能发生在只有一个节点的群集中，或者该节点尚未与群集的其余部分连接。
如果节点配置为使用已宣布的主机名，但是使用 `cluster-announce-hostname` 未配置主机名，则显示值为 `?`。
在处理客户端时，可以将空字符串视为 NULL 的方式相同，即与发送当前命令的相同端点，而 `"?"` 应该被视为未知节点，不一定是当前命令所用节点相同的节点。

附加的网络元数据以每个节点的第四个参数作为地图提供。
可能返回以下网络元数据:

* IP: 当首选终点未设置为 IP 时。
* Hostname: 当节点有公布的主机名但主要终点未设置为主机名时。

## 嵌套结果数组
每个嵌套结果是：

- 开始槽范围
- 结束槽范围
- 表示为嵌套网络信息的槽范围的主节点
- 槽范围主节点的第一个副本
- 第二个副本
- ...一直持续到返回该主节点的所有副本。

结果中包括所列槽范围内主实例的所有活动副本。未正常运行的副本不返回。

保证第三个嵌套回复为槽范围的主实例的网络信息。
第三个嵌套回复后的所有网络信息都是主实例的副本。

如果集群实例有非连续的插槽（例如1-400，900，1800-6000），那么每个顶级插槽范围的主节点和副本网络信息将会出现重复。

```
> CLUSTER SLOTS
1) 1) (integer) 0
   2) (integer) 5460
   3) 1) "127.0.0.1"
      2) (integer) 30001
      3) "09dbe9720cda62f7865eabc5fd8857c5d2678366"
      4) 1) hostname
         2) "host-1.redis.example.com"
   4) 1) "127.0.0.1"
      2) (integer) 30004
      3) "821d8ca00d7ccf931ed3ffc7e3db0599d2271abf"
      4) 1) hostname
         2) "host-2.redis.example.com"
2) 1) (integer) 5461
   2) (integer) 10922
   3) 1) "127.0.0.1"
      2) (integer) 30002
      3) "c9d93d9f2c0c524ff34cc11838c2003d8c29e013"
      4) 1) hostname
         2) "host-3.redis.example.com"
   4) 1) "127.0.0.1"
      2) (integer) 30005
      3) "faadb3eb99009de4ab72ad6b6ed87634c7ee410f"
      4) 1) hostname
         2) "host-4.redis.example.com"
3) 1) (integer) 10923
   2) (integer) 16383
   3) 1) "127.0.0.1"
      2) (integer) 30003
      3) "044ec91f325b7595e76dbcb18cc688b6a5b434a1"
      4) 1) hostname
         2) "host-5.redis.example.com"
   4) 1) "127.0.0.1"
      2) (integer) 30006
      3) "58e6e48d41228013e5d9c1c37c5060693925e97e"
      4) 1) hostname
         2) "host-6.redis.example.com"
```

**警告：**在将来的版本中可能会有更多元素来更好地描述节点。
一般来说，客户端实现应当仅依赖于某些参数被指定的固定位置，但是可能会有更多参数出现而应当被忽略。
同样，客户端库应当尽可能地尝试适应旧版本可能仅具有主要终端点和端口参数的情况。

## 行为变更历史

* `>= 7.0.0`：在节点响应的第一个字段中添加了对主机名和未知端点的支持。
