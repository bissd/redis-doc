从流中通过消费者组获取数据，并不承认这样的数据，会创建*挂起的条目*。这在`XREADGROUP`命令中有很好的解释，我们的[Redis Streams介绍](/topics/streams-intro)中更是如此。一旦消息成功处理，`XACK`命令将立即将挂起的条目从挂起条目列表（PEL）中删除，因为消费者组不再需要跟踪它并记住消息的当前所有者。

`XPENDING` 命令是用于检查待处理消息列表的接口，因此对于观察和了解流消费者组的情况非常重要：活动的客户端是谁，有哪些消息等待消费，是否有空闲消息。此外，该命令与 `XCLAIM` 命令一起用于实现对长时间失败的消费者的恢复，因此某些消息没有被处理：另一个消费者可以接收消息并继续处理。这在[流入门](/topics/streams-intro)和 `XCLAIM` 命令页面中有更详细的解释，此处不做涉及。

## XPENDING 的摘要形式

当只调用 `XPENDING`命令时，只需要提供键名和消费者组名，它将输出关于给定消费者组中待处理消息的摘要。在下面的示例中，我们创建了一个消费者组，并通过使用 `XREADGROUP` 从该组中读取消息，立即创建了一条待处理消息。

```
> XGROUP CREATE mystream group55 0-0
OK

> XREADGROUP GROUP group55 consumer-123 COUNT 1 STREAMS mystream >
1) 1) "mystream"
   2) 1) 1) 1526984818136-0
         2) 1) "duration"
            2) "1532"
            3) "event-id"
            4) "5"
            5) "user-id"
            6) "7782813"
```

我们预计现在消费者组`group55`的挂起条目列表应该有一条消息：名为`consumer-123`的消费者获取了消息但未确认其处理。使用简单的`XPENDING`命令可以给我们提供这些信息：

```
> XPENDING mystream group55
1) (integer) 1
2) 1526984818136-0
3) 1526984818136-0
4) 1) 1) "consumer-123"
      2) "1"
```

在这个表单中，该命令输出该消费者组的待处理消息总数，该数为1，随后是待处理消息中最小和最大的ID，然后列出消费者组中每个至少有一个待处理消息的消费者及其待处理消息的数量。

## 扩展的XPENDING形式

摘要提供了很好的概述，但有时我们对细节感兴趣。为了查看所有具有更多关联信息的待处理消息，我们还需要传递一系列的 ID，类似于我们使用 `XRANGE` 所做的方式，并且还有一个非可选的 *count* 参数，以限制每次调用返回的消息数量：

```
> XPENDING mystream group55 - + 10
1) 1) 1526984818136-0
   2) "consumer-123"
   3) (integer) 196415
   4) (integer) 1
```

在扩展形式中，我们不再看到摘要信息，而是在待处理条目列表中为每个消息提供详细信息。对于每个消息，返回四个属性：

1. 消息的ID。
2. 取走消息且尚未确认的消费者的名称。我们将其称为消息的当前*所有者*。
3. 自上次将消息传递给此消费者以来经过的毫秒数。
4. 消息传递的次数。

传送计数器位于数组的第四个元素，当其他消费者使用`XCLAIM`声明了该消息，或者当通过`XREADGROUP`再次投递消息时，该计数器会加1。当访问消费者组中的消费者的历史记录时（请参阅"XREADGROUP"页面了解更多信息）。

可以通过传递附加参数给命令，以查看具有特定所有者的消息。

```
> XPENDING mystream group55 - + 10 consumer-123
```

在上述情况下，输出将是相同的，因为我们只有一个消费者的待处理消息。然而，重要的是要记住，即使有许多消费者的许多待处理消息，通过特定消费者进行过滤的操作也不是低效的：我们在全局和每个消费者上都有一个待处理条目列表数据结构，因此我们可以非常有效地仅显示一个消费者待处理的消息。

## 空闲时间过滤器

也可以根据待处理流条目的空闲时间（以毫秒为单位）来筛选，这对于长时间未处理的条目使用 `XCLAIM` 是有用的

```
> XPENDING mystream group55 IDLE 9000 - + 10
> XPENDING mystream group55 IDLE 9000 - + 10 consumer-123
```

第一个案例将返回整个组中首个10个（或更少）闲置超过9秒的PEL条目，而在第二个案例中仅返回`consumer-123`的条目。

## 独占范围与迭代PEL

`XPENDING`命令允许像`XRANGE`和`XREVRANGE`命令一样遍历待处理条目。您可以通过在上次读取的待处理条目ID前加上`(`字符来实现这一点，该字符表示开放（独占）范围，并将其提供给后续调用该命令的参数中。
